# 散列表

## 设计散列函数

### 设计散列函数时应该注意什么：

1. 定义域必须涵盖所有可能出现的关键字
2. 值域不能超出散列表的地址范围
3. 尽可能减少冲突。散列函数计算出来的地址应尽可能均匀分布在整个地址空间
4. 散列函数应尽可能简单，能够快速计算出任意一个关键字对应的散列地址

### 除留余数法(通用，关键字为整数即可)

散列表表长为m，取一个不大于m但最接近或等于m的质数p

### 直接定址法(关键字分布基本连续)

$$H(key)=a*key+b$$

### 数字分析法(关键字集合已知，且关键字的某几个数码位分布均匀)

选取数码分布较为均匀的若干位作为散列地址

### 平方取中法——取关键字的平方值的中间几位作为散列地址(关键字的每位取值都不够均匀)

## 处理冲突的方法

### 拉链法

- 在分析查找长度时，通常只统计“关键字的对比次数”，而链表“空指针的对比次数”不计入查找长度

### 开放定址法

$$H_{i}=(H(key)+d_{i})%m$$

$$0\leq i \leq m-1$$

#### 线性探测法

$$d_{i}=0,1,2,3,\cdots,m-1$$

##### 查找

- 根据探测序列依次对比各存储单元内的关键字
  - 若探测到目标关键字，则查找成功
  - 若探测到空单元，则查找失败

#### 平方探测法

$$d_{i}=0^{2},1^{2},-1^{2},2^{2},-2^{2},\cdots,k^{2},-k^{2}$$

$$\text{其中}k\leq m/2$$

##### 查找过程

- 根据探测序列依次对比各存储单元内的关键字
  - 若探测到目标关键字，则查找成功
  - 若探测到空单元，则查找失败
 
#### 双散列法

$$d_{i}=i\times hash_{2}(key)$$

##### 查找(类似)

#### 伪随机序列

$$d_{i}\text{是一个伪随机序列}$$

#### 删除元素

1. 先根据散列函数算出散列地址，并对比关键字是否匹配。若匹配，则“查找成功”
2. 若关键字不匹配，则根据“探测序列”对比下一个地址的关键字，直到“查找成功”或“查找失败”
3. 若“查找成功”，则删除找到的元素

##### 注意

- 采用“开放定址法”时，删除元素不能简单地将被删元素的空间置为空，否则将截断在它之后的探测路径，可以做一个“已删除”标记，进行逻辑删除。
- 新元素可以插入到已被“逻辑删除”的地址
